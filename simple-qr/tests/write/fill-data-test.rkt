#lang racket

(require rackunit/text-ui
         rackunit
         "../../write/fill-data.rkt")

(define test-fill-data
  (test-suite 
   "test-fill-data"

   (test-case
    "test-get-get-data-socket-list"

    (check-equal? 
     (get-data-socket-list 9)
     '(
       (12 . 12) (12 . 11) (11 . 12) (11 . 11) (10 . 12) (10 . 11)  (9 . 12)  (9 . 11)  (8 . 12)  (8 . 11)  (7 . 12)  (7 . 11)  (6 . 12)  (6 . 11)  (5 . 12)  (5 . 11)  (4 . 12)  (4 . 11)
       (4 . 9)   (4 . 8)   (5 . 9)   (5 . 8)   (6 . 9)   (6 . 8)    (7 . 9)   (7 . 8)   (8 . 9)   (8 . 8)   (9 . 9)   (9 . 8)   (10 . 9)  (10 . 8)  (11 . 9)  (11 . 8)  (12 . 9)  (12 . 8)
       (12 . 7)  (12 . 6)  (11 . 7)  (11 . 6)  (10 . 7)  (10 . 6)   (9 . 7)   (9 . 6)   (8 . 7)   (8 . 6)   (7 . 7)   (7 . 6)   (6 . 7)   (6 . 6)   (5 . 7)   (5 . 6)   (4 . 7)   (4 . 6)
       (4 . 5)   (4 . 4)   (5 . 5)   (5 . 4)   (6 . 5)   (6 . 4)    (7 . 5)   (7 . 4)   (8 . 5)   (8 . 4)   (9 . 5)   (9 . 4)   (10 . 5)  (10 . 4)  (11 . 5)  (11 . 4)  (12 . 5)  (12 . 4)
       )))

   (test-case
    "test-skip-hash"

    (let ([skip_hash (make-hash)])
      (hash-set! skip_hash '(9 . 9) #t)
      (hash-set! skip_hash '(9 . 8) #t)
      (hash-set! skip_hash '(7 . 4) #t)
      (hash-set! skip_hash '(12 . 4) #t)
      (check-equal? 
       (get-data-socket-list 9 #:skip_points_hash skip_hash)
       '(
         (12 . 12) (12 . 11) (11 . 12) (11 . 11) (10 . 12) (10 . 11)  (9 . 12)  (9 . 11)  (8 . 12)  (8 . 11)  (7 . 12)  (7 . 11)  (6 . 12)  (6 . 11)  (5 . 12)  (5 . 11)  (4 . 12)  (4 . 11)
         (4 . 9)   (4 . 8)   (5 . 9)   (5 . 8)   (6 . 9)   (6 . 8)    (7 . 9)   (7 . 8)   (8 . 9)   (8 . 8)                       (10 . 9)  (10 . 8)  (11 . 9)  (11 . 8)  (12 . 9)  (12 . 8)
         (12 . 7)  (12 . 6)  (11 . 7)  (11 . 6)  (10 . 7)  (10 . 6)   (9 . 7)   (9 . 6)   (8 . 7)   (8 . 6)   (7 . 7)   (7 . 6)   (6 . 7)   (6 . 6)   (5 . 7)   (5 . 6)   (4 . 7)   (4 . 6)
         (4 . 5)   (4 . 4)   (5 . 5)   (5 . 4)   (6 . 5)   (6 . 4)    (7 . 5)             (8 . 5)   (8 . 4)   (9 . 5)   (9 . 4)   (10 . 5)  (10 . 4)  (11 . 5)  (11 . 4)  (12 . 5)
         ))))

   ))

(run-tests test-fill-data)
